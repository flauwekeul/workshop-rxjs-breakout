(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();var K=function(e,r){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])},K(e,r)};function L(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");K(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}function Be(e,r,t,n){function o(i){return i instanceof t?i:new t(function(c){c(i)})}return new(t||(t=Promise))(function(i,c){function u(l){try{a(n.next(l))}catch(h){c(h)}}function s(l){try{a(n.throw(l))}catch(h){c(h)}}function a(l){l.done?i(l.value):o(l.value).then(u,s)}a((n=n.apply(e,r||[])).next())})}function se(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(a){return function(l){return s([a,l])}}function s(a){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return t.label++,{value:a[1],done:!1};case 5:t.label++,o=a[1],a=[0];continue;case 7:a=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){t.label=a[1];break}if(a[0]===6&&t.label<i[1]){t.label=i[1],i=a;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(a);break}i[2]&&t.ops.pop(),t.trys.pop();continue}a=r.call(e,t)}catch(l){a=[6,l],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function A(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],c;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){c={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return i}function g(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))}function x(e){return this instanceof x?(this.v=e,this):new x(e)}function Re(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,r||[]),o,i=[];return o={},c("next"),c("throw"),c("return"),o[Symbol.asyncIterator]=function(){return this},o;function c(f){n[f]&&(o[f]=function(p){return new Promise(function(w,v){i.push([f,p,w,v])>1||u(f,p)})})}function u(f,p){try{s(n[f](p))}catch(w){h(i[0][3],w)}}function s(f){f.value instanceof x?Promise.resolve(f.value.v).then(a,l):h(i[0][2],f)}function a(f){u("next",f)}function l(f){u("throw",f)}function h(f,p){f(p),i.shift(),i.length&&u(i[0][0],i[0][1])}}function ke(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],t;return r?r.call(e):(e=typeof A=="function"?A(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(c){return new Promise(function(u,s){c=e[i](c),o(u,s,c.done,c.value)})}}function o(i,c,u,s){Promise.resolve(s).then(function(a){i({value:a,done:u})},c)}}function d(e){return typeof e=="function"}function ae(e){var r=function(n){Error.call(n),n.stack=new Error().stack},t=e(r);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var G=ae(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function W(e,r){if(e){var t=e.indexOf(r);0<=t&&e.splice(t,1)}}var R=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,t,n,o,i;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var u=A(c),s=u.next();!s.done;s=u.next()){var a=s.value;a.remove(this)}}catch(v){r={error:v}}finally{try{s&&!s.done&&(t=u.return)&&t.call(u)}finally{if(r)throw r.error}}else c.remove(this);var l=this.initialTeardown;if(d(l))try{l()}catch(v){i=v instanceof G?v.errors:[v]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var f=A(h),p=f.next();!p.done;p=f.next()){var w=p.value;try{re(w)}catch(v){i=i??[],v instanceof G?i=g(g([],b(i)),b(v.errors)):i.push(v)}}}catch(v){n={error:v}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}if(i)throw new G(i)}},e.prototype.add=function(r){var t;if(r&&r!==this)if(this.closed)re(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(r)}},e.prototype._hasParent=function(r){var t=this._parentage;return t===r||Array.isArray(t)&&t.includes(r)},e.prototype._addParent=function(r){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(r),t):t?[t,r]:r},e.prototype._removeParent=function(r){var t=this._parentage;t===r?this._parentage=null:Array.isArray(t)&&W(t,r)},e.prototype.remove=function(r){var t=this._finalizers;t&&W(t,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}(),le=R.EMPTY;function fe(e){return e instanceof R||e&&"closed"in e&&d(e.remove)&&d(e.add)&&d(e.unsubscribe)}function re(e){d(e)?e():e.unsubscribe()}var de={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},V={setTimeout:function(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var o=V.delegate;return o!=null&&o.setTimeout?o.setTimeout.apply(o,g([e,r],b(t))):setTimeout.apply(void 0,g([e,r],b(t)))},clearTimeout:function(e){var r=V.delegate;return((r==null?void 0:r.clearTimeout)||clearTimeout)(e)},delegate:void 0};function he(e){V.setTimeout(function(){throw e})}function Y(){}function j(e){e()}var N=function(e){L(r,e);function r(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,fe(t)&&t.add(n)):n.destination=je,n}return r.create=function(t,n,o){return new z(t,n,o)},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(R),Fe=Function.prototype.bind;function H(e,r){return Fe.call(e,r)}var Me=function(){function e(r){this.partialObserver=r}return e.prototype.next=function(r){var t=this.partialObserver;if(t.next)try{t.next(r)}catch(n){C(n)}},e.prototype.error=function(r){var t=this.partialObserver;if(t.error)try{t.error(r)}catch(n){C(n)}else C(r)},e.prototype.complete=function(){var r=this.partialObserver;if(r.complete)try{r.complete()}catch(t){C(t)}},e}(),z=function(e){L(r,e);function r(t,n,o){var i=e.call(this)||this,c;if(d(t)||!t)c={next:t??void 0,error:n??void 0,complete:o??void 0};else{var u;i&&de.useDeprecatedNextContext?(u=Object.create(t),u.unsubscribe=function(){return i.unsubscribe()},c={next:t.next&&H(t.next,u),error:t.error&&H(t.error,u),complete:t.complete&&H(t.complete,u)}):c=t}return i.destination=new Me(c),i}return r}(N);function C(e){he(e)}function Ce(e){throw e}var je={closed:!0,next:Y,error:Ce,complete:Y},Q=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Z(e){return e}function De(e){return e.length===0?Z:e.length===1?e[0]:function(t){return e.reduce(function(n,o){return o(n)},t)}}var m=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(r,t,n){var o=this,i=$e(r)?r:new z(r,t,n);return j(function(){var c=o,u=c.operator,s=c.source;i.add(u?u.call(i,s):s?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){r.error(t)}},e.prototype.forEach=function(r,t){var n=this;return t=ne(t),new t(function(o,i){var c=new z({next:function(u){try{r(u)}catch(s){i(s),c.unsubscribe()}},error:i,complete:o});n.subscribe(c)})},e.prototype._subscribe=function(r){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(r)},e.prototype[Q]=function(){return this},e.prototype.pipe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return De(r)(this)},e.prototype.toPromise=function(r){var t=this;return r=ne(r),new r(function(n,o){var i;t.subscribe(function(c){return i=c},function(c){return o(c)},function(){return n(i)})})},e.create=function(r){return new e(r)},e}();function ne(e){var r;return(r=e??de.Promise)!==null&&r!==void 0?r:Promise}function Ue(e){return e&&d(e.next)&&d(e.error)&&d(e.complete)}function $e(e){return e&&e instanceof N||Ue(e)&&fe(e)}function Ge(e){return d(e==null?void 0:e.lift)}function P(e){return function(r){if(Ge(r))return r.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function S(e,r,t,n,o){return new He(e,r,t,n,o)}var He=function(e){L(r,e);function r(t,n,o,i,c,u){var s=e.call(this,t)||this;return s.onFinalize=c,s.shouldUnsubscribe=u,s._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:e.prototype._next,s._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=o?function(){try{o()}catch(a){t.error(a)}finally{this.unsubscribe()}}:e.prototype._complete,s}return r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},r}(N),ve={now:function(){return(ve.delegate||performance).now()},delegate:void 0},B={schedule:function(e){var r=requestAnimationFrame,t=cancelAnimationFrame,n=B.delegate;n&&(r=n.requestAnimationFrame,t=n.cancelAnimationFrame);var o=r(function(i){t=void 0,e(i)});return new R(function(){return t==null?void 0:t(o)})},requestAnimationFrame:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=B.delegate;return((t==null?void 0:t.requestAnimationFrame)||requestAnimationFrame).apply(void 0,g([],b(e)))},cancelAnimationFrame:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=B.delegate;return((t==null?void 0:t.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,g([],b(e)))},delegate:void 0};function qe(e){return e?pe(e):Ke}function pe(e){return new m(function(r){var t=e||ve,n=t.now(),o=0,i=function(){r.closed||(o=B.requestAnimationFrame(function(c){o=0;var u=t.now();r.next({timestamp:e?u:c,elapsed:u-n}),i()}))};return i(),function(){o&&B.cancelAnimationFrame(o)}})}var Ke=pe(),We=ae(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ye=function(e){L(r,e);function r(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.prototype.lift=function(t){var n=new oe(this,this);return n.operator=t,n},r.prototype._throwIfClosed=function(){if(this.closed)throw new We},r.prototype.next=function(t){var n=this;j(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var c=A(n.currentObservers),u=c.next();!u.done;u=c.next()){var s=u.value;s.next(t)}}catch(a){o={error:a}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}}})},r.prototype.error=function(t){var n=this;j(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var o=n.observers;o.length;)o.shift().error(t)}})},r.prototype.complete=function(){var t=this;j(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var n=this,o=this,i=o.hasError,c=o.isStopped,u=o.observers;return i||c?le:(this.currentObservers=null,u.push(t),new R(function(){n.currentObservers=null,W(u,t)}))},r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n.thrownError,c=n.isStopped;o?t.error(i):c&&t.complete()},r.prototype.asObservable=function(){var t=new m;return t.source=this,t},r.create=function(t,n){return new oe(t,n)},r}(m),oe=function(e){L(r,e);function r(t,n){var o=e.call(this)||this;return o.destination=t,o.source=n,o}return r.prototype.next=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,t)},r.prototype.error=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,t)},r.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},r.prototype._subscribe=function(t){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&o!==void 0?o:le},r}(ye),k=function(e){L(r,e);function r(t){var n=e.call(this)||this;return n._value=t,n}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},r.prototype.getValue=function(){var t=this,n=t.hasError,o=t.thrownError,i=t._value;if(n)throw o;return this._throwIfClosed(),i},r.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},r}(ye);function Ve(e){return e[e.length-1]}function Ye(e){return d(Ve(e))?e.pop():void 0}var be=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function ze(e){return d(e==null?void 0:e.then)}function Xe(e){return d(e[Q])}function Je(e){return Symbol.asyncIterator&&d(e==null?void 0:e[Symbol.asyncIterator])}function Ne(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Qe(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ze=Qe();function et(e){return d(e==null?void 0:e[Ze])}function tt(e){return Re(this,arguments,function(){var t,n,o,i;return se(this,function(c){switch(c.label){case 0:t=e.getReader(),c.label=1;case 1:c.trys.push([1,,9,10]),c.label=2;case 2:return[4,x(t.read())];case 3:return n=c.sent(),o=n.value,i=n.done,i?[4,x(void 0)]:[3,5];case 4:return[2,c.sent()];case 5:return[4,x(o)];case 6:return[4,c.sent()];case 7:return c.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function rt(e){return d(e==null?void 0:e.getReader)}function $(e){if(e instanceof m)return e;if(e!=null){if(Xe(e))return nt(e);if(be(e))return ot(e);if(ze(e))return it(e);if(Je(e))return me(e);if(et(e))return ct(e);if(rt(e))return ut(e)}throw Ne(e)}function nt(e){return new m(function(r){var t=e[Q]();if(d(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ot(e){return new m(function(r){for(var t=0;t<e.length&&!r.closed;t++)r.next(e[t]);r.complete()})}function it(e){return new m(function(r){e.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,he)})}function ct(e){return new m(function(r){var t,n;try{for(var o=A(e),i=o.next();!i.done;i=o.next()){var c=i.value;if(r.next(c),r.closed)return}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}r.complete()})}function me(e){return new m(function(r){st(e,r).catch(function(t){return r.error(t)})})}function ut(e){return me(tt(e))}function st(e,r){var t,n,o,i;return Be(this,void 0,void 0,function(){var c,u;return se(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),t=ke(e),s.label=1;case 1:return[4,t.next()];case 2:if(n=s.sent(),!!n.done)return[3,4];if(c=n.value,r.next(c),r.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=s.sent(),o={error:u},[3,11];case 6:return s.trys.push([6,,9,10]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}function at(e,r,t,n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var i=r.schedule(function(){t(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}function F(e,r){return P(function(t,n){var o=0;t.subscribe(S(n,function(i){n.next(e.call(r,i,o++))}))})}var lt=Array.isArray;function ft(e,r){return lt(r)?e.apply(void 0,g([],b(r))):e(r)}function dt(e){return F(function(r){return ft(e,r)})}function ht(e,r,t,n,o,i,c,u){var s=[],a=0,l=0,h=!1,f=function(){h&&!s.length&&!a&&r.complete()},p=function(v){return a<n?w(v):s.push(v)},w=function(v){i&&r.next(v),a++;var te=!1;$(t(v,l++)).subscribe(S(r,function(T){o==null||o(T),i?p(T):r.next(T)},function(){te=!0},void 0,function(){if(te)try{a--;for(var T=function(){var M=s.shift();c?at(r,c,function(){return w(M)}):w(M)};s.length&&a<n;)T();f()}catch(M){r.error(M)}}))};return e.subscribe(S(r,p,function(){h=!0,f()})),function(){u==null||u()}}function we(e,r,t){return t===void 0&&(t=1/0),d(r)?we(function(n,o){return F(function(i,c){return r(n,i,o,c)})($(e(n,o)))},t):(typeof r=="number"&&(t=r),P(function(n,o){return ht(n,o,e,t)}))}var vt=["addListener","removeListener"],pt=["addEventListener","removeEventListener"],yt=["on","off"];function D(e,r,t,n){if(d(t)&&(n=t,t=void 0),n)return D(e,r,t).pipe(dt(n));var o=b(wt(e)?pt.map(function(u){return function(s){return e[u](r,s,t)}}):bt(e)?vt.map(ie(e,r)):mt(e)?yt.map(ie(e,r)):[],2),i=o[0],c=o[1];if(!i&&be(e))return we(function(u){return D(u,r,t)})($(e));if(!i)throw new TypeError("Invalid event target");return new m(function(u){var s=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return u.next(1<a.length?a:a[0])};return i(s),function(){return c(s)}})}function ie(e,r){return function(t){return function(n){return e[t](r,n)}}}function bt(e){return d(e.addListener)&&d(e.removeListener)}function mt(e){return d(e.on)&&d(e.off)}function wt(e){return d(e.addEventListener)&&d(e.removeEventListener)}function gt(e,r){return P(function(t,n){var o=0;t.subscribe(S(n,function(i){return e.call(r,i,o++)&&n.next(i)}))})}function St(e,r){return r===void 0&&(r=!1),P(function(t,n){var o=0;t.subscribe(S(n,function(i){var c=e(i,o++);(c||r)&&n.next(i),!c&&n.complete()}))})}function ce(e,r,t){var n=d(e)||r||t?{next:e,error:r,complete:t}:e;return n?P(function(o,i){var c;(c=n.subscribe)===null||c===void 0||c.call(n);var u=!0;o.subscribe(S(i,function(s){var a;(a=n.next)===null||a===void 0||a.call(n,s),i.next(s)},function(){var s;u=!1,(s=n.complete)===null||s===void 0||s.call(n),i.complete()},function(s){var a;u=!1,(a=n.error)===null||a===void 0||a.call(n,s),i.error(s)},function(){var s,a;u&&((s=n.unsubscribe)===null||s===void 0||s.call(n)),(a=n.finalize)===null||a===void 0||a.call(n)}))}):Z}function Et(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Ye(e);return P(function(n,o){for(var i=e.length,c=new Array(i),u=e.map(function(){return!1}),s=!1,a=function(h){$(e[h]).subscribe(S(o,function(f){c[h]=f,!s&&!u[h]&&(u[h]=!0,(s=u.every(Z))&&(u=null))},Y))},l=0;l<i;l++)a(l);n.subscribe(S(o,function(h){if(s){var f=g([h],b(c));o.next(t?t.apply(void 0,g([],b(f))):f)}}))})}const _t=80,It="#737373",ee=20,I=200,O=15,xt="#FAFAFA",At=8,Ot=30,Lt=1.02,Pt=-80,Tt=80,ge=6,Se=15,ue=40,q=80,Bt=["blue","green","yellow","orange","red","pink"],Rt={blue:"#06B6D4",green:"#22C55E",yellow:"#EAB308",orange:"#F97316",red:"#EF4444",pink:"#EC4899"},kt="#333",Ft=10,Mt=(e=document.body)=>{const r=document.createElement("canvas"),t=r.getContext("2d");return e.appendChild(r),r.width=window.innerWidth,r.height=window.innerHeight,{canvas:r,canvasContext:t}},Ee=(e,{x:r,y:t,width:n,height:o,fill:i,strokeWidth:c=0,strokeColor:u="#000"})=>{e.beginPath(),e.rect(r,t,n,o),e.fillStyle=i,e.fill(),c&&(e.lineWidth=c,e.strokeStyle=u,e.stroke())},Ct=(e,{x:r,y:t,radius:n,color:o})=>{e.beginPath(),e.arc(r,t,n,0,2*Math.PI),e.fillStyle=o,e.fill()},U=(e,{x:r,y:t,content:n,color:o="#fff",size:i=20,textAlign:c="left"})=>{e.font=`${i}px Menlo, Monaco, "Lucida Console", monospace`,e.textAlign=c,e.textBaseline="middle",e.fillStyle=o,e.fillText(n,r,t)},jt=(e,r)=>{const t=e.canvas.width/2,n=e.canvas.height/2;U(e,{x:t,y:n,content:"Game over!",size:100,textAlign:"center"}),U(e,{x:t,y:n+100,content:`Score: ${Ie(r)}`,size:60,textAlign:"center"})},Dt=(e=0,r=1/0)=>t=>Math.max(e,Math.min(r,t)),Ut=(e=0,r=1)=>t=>e*(1-t)+r*t,E=(e,r={})=>{const t={...e,...r},n=(t.direction-90)/180*Math.PI;return t.x+=t.speed*Math.cos(n),t.y+=t.speed*Math.sin(n),t},$t=({x:e},r)=>e<=O||e>=r-O,Gt=({y:e})=>e<=O,Ht=(e,r)=>{const t=e.y+O;return t>r.y&&!_e(t,r)&&e.x>=r.x&&e.x<=r.x+I},_e=(e,r)=>e>r.y+ee,qt=(e,r)=>{for(let t=0;t<r.length;t++){const n=r[t],o=n.width/2,i=n.height/2,c=Math.abs(e.x-n.x-o),u=Math.abs(e.y-n.y-i);if(c>o+e.radius||u>i+e.radius)continue;if(c<=o||u<=i)return{brickIndex:t,hasCollidedVertically:u<i};const s=c-n.width/2,a=u-n.height/2;if(s*s+a*a<=e.radius*e.radius)return{brickIndex:t,hasCollidedVertically:s>a}}},Kt=e=>{const r=Math.floor((e.width-2*q)/Se);return(t,n)=>({x:t*r+q,y:(ge-1-n)*ue+q,width:r,height:ue,color:Bt[n]})},Ie=e=>new Intl.NumberFormat("en-GB").format(e),X=e=>({x:e.x+I/2,y:e.y-O}),Wt=(e,r)=>{const t=new k(e);return D(r,"click").pipe(gt(()=>t.value.speed===0),F(()=>({...t.value,speed:At}))).subscribe(t),t},Vt=(e,{x:r,y:t,radius:n})=>{Ct(e,{x:r,y:t,radius:n,color:xt})},Yt=e=>{const r=Kt(e),t=Array.from({length:ge}),n=Array.from({length:Se}),o=t.flatMap((i,c)=>n.map((u,s)=>r(s,c)));return new k(o)},zt=(e,r)=>{r.forEach(({x:t,y:n,width:o,height:i,color:c})=>{Ee(e,{x:t,y:n,width:o,height:i,fill:Rt[c],strokeWidth:3,strokeColor:kt})})},Xt=e=>new k(e),Jt=(e,r)=>{U(e,{x:40,y:e.canvas.height-40,content:`Lives: ${r}`})},Nt=(e,r)=>{const t=Dt(0,r.width-I),n=new k(e);return D(r,"mousemove").pipe(F(i=>({...n.value,x:t(i.clientX-I/2)}))).subscribe(n),n},Qt=(e,{x:r,y:t})=>{Ee(e,{x:r,y:t,width:I,height:ee,fill:It})},Zt=e=>new k(e),er=(e,r)=>{U(e,{x:200,y:e.canvas.height-40,content:`Score: ${Ie(r)}`})},{canvas:y,canvasContext:_}=Mt(),xe={x:y.width/2-I/2,y:y.height-ee-_t},Ae={...X(xe),direction:Ot,speed:0,radius:O},Oe=Nt(xe,y),Le=Wt(Ae,y),Pe=Yt(y),Te=Xt(3),J=Zt(0),tr=Ut(Pt,Tt),rr=e=>{const{paddle:r,ball:t,bricks:n,lives:o,score:i}=e;if(t.speed===0)return y.classList.remove("hide-cursor"),{...e,ball:E(t,X(r))};if(y.classList.add("hide-cursor"),_e(t.y,r)){const u=o-1;return u===0?{...e,lives:u}:{...e,ball:E(Ae,X(r)),lives:u}}const c=qt(t,n);if(c){const{brickIndex:u,hasCollidedVertically:s}=c,a=E(t,{direction:t.direction*-1+(s?0:180),speed:t.speed*Lt}),l=n.filter((h,f)=>f!==u);return{...e,ball:a,bricks:l,score:i+Ft}}if(Ht(t,r)){const u=(t.x-r.x)/I,s=E(t,{direction:tr(u)});return{...e,ball:s}}if($t(t,y.width)){const u=E(t,{direction:t.direction*-1});return{...e,ball:u}}if(Gt(t)){const u=E(t,{direction:t.direction*-1+180});return{...e,ball:u}}return{...e,ball:E(t)}},nr=({paddle:e,ball:r,bricks:t,lives:n,score:o})=>{Oe.next(e),Le.next(r),Pe.next(t),Te.next(n),J.next(o)},or=({paddle:e,ball:r,bricks:t,lives:n,score:o})=>{_.clearRect(0,0,y.width,y.height),Qt(_,e),Vt(_,r),zt(_,t),Jt(_,n),er(_,o)},ir=()=>{qe().pipe(Et(Oe,Le,Pe,Te,J,(e,r,t,n,o,i)=>({paddle:r,ball:t,bricks:n,lives:o,score:i})),F(rr),ce(nr),ce(or),St(({bricks:e,lives:r})=>r>0&&e.length>0)).subscribe({complete:()=>{jt(_,J.value)}})};ir();
